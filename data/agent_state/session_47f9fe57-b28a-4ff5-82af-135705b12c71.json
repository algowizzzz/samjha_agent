{
  "session_id": "47f9fe57-b28a-4ff5-82af-135705b12c71",
  "user_id": null,
  "created_at": "2025-11-09T00:31:17.165096Z",
  "updated_at": "2025-11-09T00:31:17.166416Z",
  "state": {
    "user_input": "top 5 sales",
    "user_id": null,
    "session_id": "47f9fe57-b28a-4ff5-82af-135705b12c71",
    "timestamp": "2025-11-09T00:31:17.165083Z",
    "docs_meta": [],
    "table_schema": {
      "sample_customer_data": {
        "columns": [
          {
            "name": "customer_id",
            "type": "VARCHAR"
          },
          {
            "name": "customer_name",
            "type": "VARCHAR"
          },
          {
            "name": "email",
            "type": "VARCHAR"
          },
          {
            "name": "country",
            "type": "VARCHAR"
          },
          {
            "name": "signup_date",
            "type": "VARCHAR"
          },
          {
            "name": "total_purchases",
            "type": "VARCHAR"
          },
          {
            "name": "customer_tier",
            "type": "VARCHAR"
          }
        ]
      },
      "sample_inventory_data": {
        "columns": [
          {
            "name": "product_id",
            "type": "VARCHAR"
          },
          {
            "name": "product_name",
            "type": "VARCHAR"
          },
          {
            "name": "category",
            "type": "VARCHAR"
          },
          {
            "name": "stock_quantity",
            "type": "VARCHAR"
          },
          {
            "name": "reorder_level",
            "type": "VARCHAR"
          },
          {
            "name": "unit_cost",
            "type": "VARCHAR"
          },
          {
            "name": "unit_price",
            "type": "VARCHAR"
          },
          {
            "name": "supplier",
            "type": "VARCHAR"
          }
        ]
      },
      "sample_sales_data": {
        "columns": [
          {
            "name": "order_id",
            "type": "VARCHAR"
          },
          {
            "name": "customer_id",
            "type": "VARCHAR"
          },
          {
            "name": "product",
            "type": "VARCHAR"
          },
          {
            "name": "category",
            "type": "VARCHAR"
          },
          {
            "name": "quantity",
            "type": "VARCHAR"
          },
          {
            "name": "price",
            "type": "VARCHAR"
          },
          {
            "name": "order_date",
            "type": "VARCHAR"
          },
          {
            "name": "region",
            "type": "VARCHAR"
          }
        ]
      }
    },
    "logs": [
      {
        "node": "invoke",
        "timestamp": "2025-11-09T00:31:17.162547Z",
        "msg": "invoke started"
      },
      {
        "node": "invoke",
        "timestamp": "2025-11-09T00:31:17.165073Z",
        "msg": "loaded schema for 3 tables, 0 metadata entries"
      },
      {
        "node": "planner",
        "timestamp": "2025-11-09T00:31:17.165858Z",
        "msg": "planning query"
      },
      {
        "node": "planner",
        "timestamp": "2025-11-09T00:31:17.165974Z",
        "msg": "plan generated: quality=medium, control=clarify, clarifications=0"
      },
      {
        "node": "clarify",
        "timestamp": "2025-11-09T00:31:17.166384Z",
        "msg": "requesting user clarification"
      },
      {
        "node": "clarify",
        "timestamp": "2025-11-09T00:31:17.166409Z",
        "msg": "clarification prompt generated with 3 questions (turn 1)"
      }
    ],
    "control": "wait_for_user",
    "metrics": {
      "node_timings_ms": {
        "planner": 0.125
      },
      "total_ms": 0.0,
      "clarify_turns": 2,
      "start_time": "2025-11-09T00:31:17.162531Z",
      "plan_id": "c5ad3386bc9478cc"
    },
    "last_node": "clarify",
    "parquet_location": "data/duckdb",
    "conversation_history": [],
    "plan": {
      "type": "sql_plan",
      "sql": "SELECT * FROM sample_sales_data LIMIT 5",
      "limits": {
        "preview_rows": 100
      },
      "target_table": "sample_sales_data"
    },
    "plan_quality": "medium",
    "plan_explain": "Heuristic plan based on detected table names and default preview limit.",
    "clarification_questions": [],
    "clarify_prompt": "I need clarification on your query: \"top 5 sales\"\n\n**Why I'm asking:**\n• The query could be interpreted in multiple ways\n• Multiple tables might match your request\n\n**Questions:**\n1. Which specific table or dataset should I query?\n2. What columns or metrics are you interested in?\n3. Are there any filters or conditions I should apply?\n\nPlease provide more details to help me generate an accurate query.",
    "clarify_questions": [
      "Which specific table or dataset should I query?",
      "What columns or metrics are you interested in?",
      "Are there any filters or conditions I should apply?"
    ],
    "clarify_reasoning": [
      "The query could be interpreted in multiple ways",
      "Multiple tables might match your request"
    ]
  }
}